<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 시계열 분석2 | 텍스트 분석을 통한 프로듀스X101 데뷔조 예측</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 시계열 분석2 | 텍스트 분석을 통한 프로듀스X101 데뷔조 예측" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 시계열 분석2 | 텍스트 분석을 통한 프로듀스X101 데뷔조 예측" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="JDW" />


<meta name="date" content="2019-12-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="시계열-분석1.html"/>

<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.17/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NYSBNPQH3H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NYSBNPQH3H');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">텍스트 분석을 통한 프로듀스X101 데뷔조 예측</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Update</a></li>
<li class="chapter" data-level="1" data-path="prologue.html"><a href="prologue.html"><i class="fa fa-check"></i><b>1</b> Prologue</a></li>
<li class="chapter" data-level="2" data-path="데이터-수집.html"><a href="데이터-수집.html"><i class="fa fa-check"></i><b>2</b> 데이터 수집</a>
<ul>
<li class="chapter" data-level="2.1" data-path="데이터-수집.html"><a href="데이터-수집.html#웹-스크래핑"><i class="fa fa-check"></i><b>2.1</b> 웹 스크래핑</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="데이터-전처리.html"><a href="데이터-전처리.html"><i class="fa fa-check"></i><b>3</b> 데이터 전처리</a>
<ul>
<li class="chapter" data-level="3.1" data-path="데이터-전처리.html"><a href="데이터-전처리.html#데이터-취합"><i class="fa fa-check"></i><b>3.1</b> 데이터 취합</a></li>
<li class="chapter" data-level="3.2" data-path="데이터-전처리.html"><a href="데이터-전처리.html#feature-engineering"><i class="fa fa-check"></i><b>3.2</b> Feature Engineering</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="데이터-시각화.html"><a href="데이터-시각화.html"><i class="fa fa-check"></i><b>4</b> 데이터 시각화</a>
<ul>
<li class="chapter" data-level="4.1" data-path="데이터-시각화.html"><a href="데이터-시각화.html#회차별-게시글-수-비교"><i class="fa fa-check"></i><b>4.1</b> 회차별 게시글 수 비교</a></li>
<li class="chapter" data-level="4.2" data-path="데이터-시각화.html"><a href="데이터-시각화.html#요일별-게시글-수-비교"><i class="fa fa-check"></i><b>4.2</b> 요일별 게시글 수 비교</a></li>
<li class="chapter" data-level="4.3" data-path="데이터-시각화.html"><a href="데이터-시각화.html#일자별-게시글-수-비교"><i class="fa fa-check"></i><b>4.3</b> 일자별 게시글 수 비교</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="언급량-도출.html"><a href="언급량-도출.html"><i class="fa fa-check"></i><b>5</b> 언급량 도출</a>
<ul>
<li class="chapter" data-level="5.1" data-path="언급량-도출.html"><a href="언급량-도출.html#데이터-시각화-1"><i class="fa fa-check"></i><b>5.1</b> 데이터 시각화</a></li>
<li class="chapter" data-level="5.2" data-path="언급량-도출.html"><a href="언급량-도출.html#분석-범위-설정"><i class="fa fa-check"></i><b>5.2</b> 분석 범위 설정</a></li>
<li class="chapter" data-level="5.3" data-path="언급량-도출.html"><a href="언급량-도출.html#언급량-집계"><i class="fa fa-check"></i><b>5.3</b> 언급량 집계</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="언급량-도출.html"><a href="언급량-도출.html#별명-정리"><i class="fa fa-check"></i><b>5.3.1</b> 별명 정리</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="언급량-도출.html"><a href="언급량-도출.html#언급량-시각화"><i class="fa fa-check"></i><b>5.4</b> 언급량 시각화</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="언급량-도출.html"><a href="언급량-도출.html#barchart"><i class="fa fa-check"></i><b>5.4.1</b> Barchart</a></li>
<li class="chapter" data-level="5.4.2" data-path="언급량-도출.html"><a href="언급량-도출.html#에피소드별-언급량-변화"><i class="fa fa-check"></i><b>5.4.2</b> 에피소드별 언급량 변화</a></li>
<li class="chapter" data-level="5.4.3" data-path="언급량-도출.html"><a href="언급량-도출.html#barchart11화-언급량-기준-정렬"><i class="fa fa-check"></i><b>5.4.3</b> Barchart(11화 언급량 기준 정렬)</a></li>
<li class="chapter" data-level="5.4.4" data-path="언급량-도출.html"><a href="언급량-도출.html#bump-chart"><i class="fa fa-check"></i><b>5.4.4</b> Bump chart</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="모델링.html"><a href="모델링.html"><i class="fa fa-check"></i><b>6</b> 모델링</a>
<ul>
<li class="chapter" data-level="6.1" data-path="모델링.html"><a href="모델링.html#파일-불러오기-구조-확인"><i class="fa fa-check"></i><b>6.1</b> 파일 불러오기 &amp; 구조 확인</a></li>
<li class="chapter" data-level="6.2" data-path="모델링.html"><a href="모델링.html#예측-방식-설정"><i class="fa fa-check"></i><b>6.2</b> 예측 방식 설정</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="다중회귀분석.html"><a href="다중회귀분석.html"><i class="fa fa-check"></i><b>7</b> 다중회귀분석</a>
<ul>
<li class="chapter" data-level="7.1" data-path="다중회귀분석.html"><a href="다중회귀분석.html#데이터-분할"><i class="fa fa-check"></i><b>7.1</b> 데이터 분할</a></li>
<li class="chapter" data-level="7.2" data-path="다중회귀분석.html"><a href="다중회귀분석.html#모델-검정"><i class="fa fa-check"></i><b>7.2</b> 모델 검정</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="다중회귀분석.html"><a href="다중회귀분석.html#정규성"><i class="fa fa-check"></i><b>7.2.1</b> 정규성</a></li>
<li class="chapter" data-level="7.2.2" data-path="다중회귀분석.html"><a href="다중회귀분석.html#선형성"><i class="fa fa-check"></i><b>7.2.2</b> 선형성</a></li>
<li class="chapter" data-level="7.2.3" data-path="다중회귀분석.html"><a href="다중회귀분석.html#독립성"><i class="fa fa-check"></i><b>7.2.3</b> 독립성</a></li>
<li class="chapter" data-level="7.2.4" data-path="다중회귀분석.html"><a href="다중회귀분석.html#등분산성"><i class="fa fa-check"></i><b>7.2.4</b> 등분산성</a></li>
<li class="chapter" data-level="7.2.5" data-path="다중회귀분석.html"><a href="다중회귀분석.html#다중공선성"><i class="fa fa-check"></i><b>7.2.5</b> 다중공선성</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="다중회귀분석.html"><a href="다중회귀분석.html#결과"><i class="fa fa-check"></i><b>7.3</b> 결과</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="시계열-분석1.html"><a href="시계열-분석1.html"><i class="fa fa-check"></i><b>8</b> 시계열 분석1</a>
<ul>
<li class="chapter" data-level="8.1" data-path="시계열-분석1.html"><a href="시계열-분석1.html#ts객체"><i class="fa fa-check"></i><b>8.1</b> <code>ts</code>객체</a></li>
<li class="chapter" data-level="8.2" data-path="시계열-분석1.html"><a href="시계열-분석1.html#모델링-1"><i class="fa fa-check"></i><b>8.2</b> 모델링</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="시계열-분석1.html"><a href="시계열-분석1.html#시계열-회귀-모델"><i class="fa fa-check"></i><b>8.2.1</b> 시계열 회귀 모델</a></li>
<li class="chapter" data-level="8.2.2" data-path="시계열-분석1.html"><a href="시계열-분석1.html#ets"><i class="fa fa-check"></i><b>8.2.2</b> ETS</a></li>
<li class="chapter" data-level="8.2.3" data-path="시계열-분석1.html"><a href="시계열-분석1.html#arima"><i class="fa fa-check"></i><b>8.2.3</b> ARIMA</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="시계열-분석1.html"><a href="시계열-분석1.html#모델-평가"><i class="fa fa-check"></i><b>8.3</b> 모델 평가</a></li>
<li class="chapter" data-level="8.4" data-path="시계열-분석1.html"><a href="시계열-분석1.html#시계열-교차-검증"><i class="fa fa-check"></i><b>8.4</b> 시계열 교차 검증</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="시계열-분석1.html"><a href="시계열-분석1.html#교차검증-함수-생성"><i class="fa fa-check"></i><b>8.4.1</b> 교차검증 함수 생성</a></li>
<li class="chapter" data-level="8.4.2" data-path="시계열-분석1.html"><a href="시계열-분석1.html#최종-모델링"><i class="fa fa-check"></i><b>8.4.2</b> 최종 모델링</a></li>
<li class="chapter" data-level="8.4.3" data-path="시계열-분석1.html"><a href="시계열-분석1.html#잔차-검정"><i class="fa fa-check"></i><b>8.4.3</b> 잔차 검정</a></li>
<li class="chapter" data-level="8.4.4" data-path="시계열-분석1.html"><a href="시계열-분석1.html#예측"><i class="fa fa-check"></i><b>8.4.4</b> 예측</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="시계열-분석2.html"><a href="시계열-분석2.html"><i class="fa fa-check"></i><b>9</b> 시계열 분석2</a>
<ul>
<li class="chapter" data-level="9.1" data-path="시계열-분석2.html"><a href="시계열-분석2.html#연습생별-모델링-함수-생성"><i class="fa fa-check"></i><b>9.1</b> 연습생별 모델링 함수 생성</a></li>
<li class="chapter" data-level="9.2" data-path="시계열-분석2.html"><a href="시계열-분석2.html#사용-모델-확인"><i class="fa fa-check"></i><b>9.2</b> 사용 모델 확인</a></li>
<li class="chapter" data-level="9.3" data-path="시계열-분석2.html"><a href="시계열-분석2.html#모델-시각화"><i class="fa fa-check"></i><b>9.3</b> 모델 시각화</a></li>
<li class="chapter" data-level="9.4" data-path="시계열-분석2.html"><a href="시계열-분석2.html#결론"><i class="fa fa-check"></i><b>9.4</b> 결론</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">텍스트 분석을 통한 프로듀스X101 데뷔조 예측</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="시계열-분석2" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> 시계열 분석2</h1>
<p> 지금까지 연습생들의 언급량을 총 합산한 데이터를 토대로 시계열 예측 과정을 진행하였습니다. 이 과정을 개별 연습생에 대한 언급량 데이터에 적용하여 각각의 연습생들에 적법한 모델을 찾고 그 모델을 토대로 바로 다음 시점의 언급량을 추정, 이를 대조하여 언습생들의 인기를 추측해 보겠습니다.</p>
<div id="연습생별-모델링-함수-생성" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> 연습생별 모델링 함수 생성</h2>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="시계열-분석2.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 연습생별 최적 성능 모델 생성 함수  </span></span>
<span id="cb37-2"><a href="시계열-분석2.html#cb37-2" aria-hidden="true" tabindex="-1"></a>boy_model <span class="ot">&lt;-</span> <span class="cf">function</span>(total, final_boy){ </span>
<span id="cb37-3"><a href="시계열-분석2.html#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 연습생 언급량 필터링 &amp; ts 객체 변환 </span></span>
<span id="cb37-4"><a href="시계열-분석2.html#cb37-4" aria-hidden="true" tabindex="-1"></a>    boy_ts <span class="ot">&lt;-</span> total <span class="sc">%&gt;%</span> </span>
<span id="cb37-5"><a href="시계열-분석2.html#cb37-5" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">filter</span>(boy <span class="sc">==</span> final_boy) <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a href="시계열-분석2.html#cb37-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ts</span>(<span class="at">frequency =</span> <span class="dv">7</span>)</span>
<span id="cb37-7"><a href="시계열-분석2.html#cb37-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-8"><a href="시계열-분석2.html#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 시계열 교차검증용 모델 지정 </span></span>
<span id="cb37-9"><a href="시계열-분석2.html#cb37-9" aria-hidden="true" tabindex="-1"></a>    forecast_arima <span class="ot">&lt;-</span> <span class="cf">function</span>(x, h){</span>
<span id="cb37-10"><a href="시계열-분석2.html#cb37-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">auto.arima</span>(x, <span class="at">stepwise =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> h)</span>
<span id="cb37-11"><a href="시계열-분석2.html#cb37-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-12"><a href="시계열-분석2.html#cb37-12" aria-hidden="true" tabindex="-1"></a>    forecast_tslm <span class="ot">&lt;-</span> <span class="cf">function</span>(x, h){</span>
<span id="cb37-13"><a href="시계열-분석2.html#cb37-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tslm</span>(x <span class="sc">~</span> trend <span class="sc">+</span> season, <span class="at">data =</span> x) <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> h)</span>
<span id="cb37-14"><a href="시계열-분석2.html#cb37-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-15"><a href="시계열-분석2.html#cb37-15" aria-hidden="true" tabindex="-1"></a>    forecast_ets <span class="ot">&lt;-</span> <span class="cf">function</span>(x, h){</span>
<span id="cb37-16"><a href="시계열-분석2.html#cb37-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ets</span>(x) <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> h)</span>
<span id="cb37-17"><a href="시계열-분석2.html#cb37-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-18"><a href="시계열-분석2.html#cb37-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-19"><a href="시계열-분석2.html#cb37-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 모델 평가 매트릭 함수 지정(RMSE)</span></span>
<span id="cb37-20"><a href="시계열-분석2.html#cb37-20" aria-hidden="true" tabindex="-1"></a>    RMSE <span class="ot">&lt;-</span> <span class="cf">function</span>(y){</span>
<span id="cb37-21"><a href="시계열-분석2.html#cb37-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mean</span>(y<span class="sc">^</span><span class="dv">2</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">^</span><span class="fl">0.5</span></span>
<span id="cb37-22"><a href="시계열-분석2.html#cb37-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-23"><a href="시계열-분석2.html#cb37-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-24"><a href="시계열-분석2.html#cb37-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 시계열 교차검증 </span></span>
<span id="cb37-25"><a href="시계열-분석2.html#cb37-25" aria-hidden="true" tabindex="-1"></a>    tslm_cv_residual  <span class="ot">&lt;-</span> <span class="fu">tsCV</span>(boy_ts[, <span class="st">&#39;sum_mention&#39;</span>], forecast_tslm, <span class="at">h =</span> <span class="dv">1</span>)</span>
<span id="cb37-26"><a href="시계열-분석2.html#cb37-26" aria-hidden="true" tabindex="-1"></a>    ets_cv_residual   <span class="ot">&lt;-</span> <span class="fu">tsCV</span>(boy_ts[, <span class="st">&#39;sum_mention&#39;</span>], forecast_ets, <span class="at">h =</span> <span class="dv">1</span>)</span>
<span id="cb37-27"><a href="시계열-분석2.html#cb37-27" aria-hidden="true" tabindex="-1"></a>    arima_cv_residual <span class="ot">&lt;-</span> <span class="fu">tsCV</span>(boy_ts[, <span class="st">&#39;sum_mention&#39;</span>], forecast_arima, <span class="at">h =</span> <span class="dv">1</span>)</span>
<span id="cb37-28"><a href="시계열-분석2.html#cb37-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-29"><a href="시계열-분석2.html#cb37-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 최적 성능순 모델 이름 추출   </span></span>
<span id="cb37-30"><a href="시계열-분석2.html#cb37-30" aria-hidden="true" tabindex="-1"></a>    models <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">model =</span> <span class="fu">c</span>(<span class="st">&#39;tslm&#39;</span>, <span class="st">&#39;ets&#39;</span>, <span class="st">&#39;arima&#39;</span>), </span>
<span id="cb37-31"><a href="시계열-분석2.html#cb37-31" aria-hidden="true" tabindex="-1"></a>                         <span class="at">score =</span> <span class="fu">c</span>(<span class="fu">RMSE</span>(tslm_cv_residual), <span class="fu">RMSE</span>(ets_cv_residual), <span class="fu">RMSE</span>(arima_cv_residual))) <span class="sc">%&gt;%</span> </span>
<span id="cb37-32"><a href="시계열-분석2.html#cb37-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">arrange</span>(score) <span class="sc">%&gt;%</span> </span>
<span id="cb37-33"><a href="시계열-분석2.html#cb37-33" aria-hidden="true" tabindex="-1"></a>        .<span class="sc">$</span>model</span>
<span id="cb37-34"><a href="시계열-분석2.html#cb37-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-35"><a href="시계열-분석2.html#cb37-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 모델 적용 함수 </span></span>
<span id="cb37-36"><a href="시계열-분석2.html#cb37-36" aria-hidden="true" tabindex="-1"></a>    select_model <span class="ot">&lt;-</span> <span class="cf">function</span>(type){</span>
<span id="cb37-37"><a href="시계열-분석2.html#cb37-37" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-38"><a href="시계열-분석2.html#cb37-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&#39;tslm&#39;</span>){</span>
<span id="cb37-39"><a href="시계열-분석2.html#cb37-39" aria-hidden="true" tabindex="-1"></a>            final_model <span class="ot">&lt;-</span> <span class="fu">tslm</span>(sum_mention <span class="sc">~</span> trend <span class="sc">+</span> season, <span class="at">data =</span> boy_ts)</span>
<span id="cb37-40"><a href="시계열-분석2.html#cb37-40" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb37-41"><a href="시계열-분석2.html#cb37-41" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-42"><a href="시계열-분석2.html#cb37-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&#39;ets&#39;</span>){</span>
<span id="cb37-43"><a href="시계열-분석2.html#cb37-43" aria-hidden="true" tabindex="-1"></a>            final_model <span class="ot">&lt;-</span> <span class="fu">ets</span>(boy_ts[, <span class="st">&#39;sum_mention&#39;</span>]) </span>
<span id="cb37-44"><a href="시계열-분석2.html#cb37-44" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb37-45"><a href="시계열-분석2.html#cb37-45" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-46"><a href="시계열-분석2.html#cb37-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&#39;arima&#39;</span>){</span>
<span id="cb37-47"><a href="시계열-분석2.html#cb37-47" aria-hidden="true" tabindex="-1"></a>            final_model <span class="ot">&lt;-</span> <span class="fu">auto.arima</span>(boy_ts[, <span class="st">&#39;sum_mention&#39;</span>], <span class="at">stepwise =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-48"><a href="시계열-분석2.html#cb37-48" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb37-49"><a href="시계열-분석2.html#cb37-49" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-50"><a href="시계열-분석2.html#cb37-50" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(final_model)</span>
<span id="cb37-51"><a href="시계열-분석2.html#cb37-51" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-52"><a href="시계열-분석2.html#cb37-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-53"><a href="시계열-분석2.html#cb37-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 최적 모델 적용 </span></span>
<span id="cb37-54"><a href="시계열-분석2.html#cb37-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(model <span class="cf">in</span> models){</span>
<span id="cb37-55"><a href="시계열-분석2.html#cb37-55" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print(model)</span></span>
<span id="cb37-56"><a href="시계열-분석2.html#cb37-56" aria-hidden="true" tabindex="-1"></a>        final_model <span class="ot">&lt;-</span> <span class="fu">select_model</span>(<span class="at">type =</span> model)</span>
<span id="cb37-57"><a href="시계열-분석2.html#cb37-57" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-58"><a href="시계열-분석2.html#cb37-58" aria-hidden="true" tabindex="-1"></a>        <span class="co"># 잔차검정 </span></span>
<span id="cb37-59"><a href="시계열-분석2.html#cb37-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">checkresiduals</span>(final_model, <span class="at">plot =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>p.value <span class="sc">&gt;</span> <span class="fl">0.05</span>){</span>
<span id="cb37-60"><a href="시계열-분석2.html#cb37-60" aria-hidden="true" tabindex="-1"></a>            <span class="co"># 테스트 통과시 for문 종료</span></span>
<span id="cb37-61"><a href="시계열-분석2.html#cb37-61" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb37-62"><a href="시계열-분석2.html#cb37-62" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb37-63"><a href="시계열-분석2.html#cb37-63" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-64"><a href="시계열-분석2.html#cb37-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-65"><a href="시계열-분석2.html#cb37-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 모든 모델이 잔차검정 통과 못할 시 </span></span>
<span id="cb37-66"><a href="시계열-분석2.html#cb37-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 차선책으로 가장 좋은 성능을 내는 첫번째 모델 선택</span></span>
<span id="cb37-67"><a href="시계열-분석2.html#cb37-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">checkresiduals</span>(final_model, <span class="at">plot =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>p.value <span class="sc">&lt;=</span> <span class="fl">0.05</span> <span class="sc">&amp;&amp;</span> model <span class="sc">==</span> models[<span class="dv">3</span>]){</span>
<span id="cb37-68"><a href="시계열-분석2.html#cb37-68" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-69"><a href="시계열-분석2.html#cb37-69" aria-hidden="true" tabindex="-1"></a>        model <span class="ot">&lt;-</span> models[<span class="dv">1</span>]</span>
<span id="cb37-70"><a href="시계열-분석2.html#cb37-70" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-71"><a href="시계열-분석2.html#cb37-71" aria-hidden="true" tabindex="-1"></a>        final_model <span class="ot">&lt;-</span> <span class="fu">select_model</span>(<span class="at">type =</span> model)</span>
<span id="cb37-72"><a href="시계열-분석2.html#cb37-72" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-73"><a href="시계열-분석2.html#cb37-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-74"><a href="시계열-분석2.html#cb37-74" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 최적 모델, 사용된 모델명 반환 </span></span>
<span id="cb37-75"><a href="시계열-분석2.html#cb37-75" aria-hidden="true" tabindex="-1"></a>    boy_model <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb37-76"><a href="시계열-분석2.html#cb37-76" aria-hidden="true" tabindex="-1"></a>        <span class="at">model     =</span> final_model, </span>
<span id="cb37-77"><a href="시계열-분석2.html#cb37-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">use_model =</span> model</span>
<span id="cb37-78"><a href="시계열-분석2.html#cb37-78" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-79"><a href="시계열-분석2.html#cb37-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-80"><a href="시계열-분석2.html#cb37-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(boy_model)</span>
<span id="cb37-81"><a href="시계열-분석2.html#cb37-81" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-82"><a href="시계열-분석2.html#cb37-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-83"><a href="시계열-분석2.html#cb37-83" aria-hidden="true" tabindex="-1"></a>final <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="fu">sapply</span>(as.list)</span>
<span id="cb37-84"><a href="시계열-분석2.html#cb37-84" aria-hidden="true" tabindex="-1"></a>final <span class="ot">&lt;-</span> <span class="fu">future_lapply</span>(boylist, boy_model, <span class="at">total =</span> total)</span>
<span id="cb37-85"><a href="시계열-분석2.html#cb37-85" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final) <span class="ot">&lt;-</span> boylist</span></code></pre></div>
<p> 연습생 개개인의 상황에 맞는 우수한 성능 모델을 찾아 잔차검정까지 마친 최적의 모델을 찾아 반환하는 <code>boy_model()</code>함수를 사용하여 그 결과물을 <code>final</code> 객체에 저장하였습니다.</p>
</div>
<div id="사용-모델-확인" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> 사용 모델 확인</h2>
<p> 연습생들에 적용된 최적의 모델이 무엇인지 확인하겠습니다.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="시계열-분석2.html#cb38-1" aria-hidden="true" tabindex="-1"></a>final <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="시계열-분석2.html#cb38-2" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){x<span class="sc">$</span>use_model}) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="시계열-분석2.html#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">do.call</span>(rbind, .) <span class="sc">%&gt;%</span> </span>
<span id="cb38-4"><a href="시계열-분석2.html#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-5"><a href="시계열-분석2.html#cb38-5" aria-hidden="true" tabindex="-1"></a>    kableExtra<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-6"><a href="시계열-분석2.html#cb38-6" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&#39;V1&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-7"><a href="시계열-분석2.html#cb38-7" aria-hidden="true" tabindex="-1"></a>    shiny<span class="sc">::</span><span class="fu">HTML</span>()</span></code></pre></div>
<table>
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:left;">  </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 김요한 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 김우석 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 이진혁 </td>
   <td style="text-align:left;"> arima </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 한승우 </td>
   <td style="text-align:left;"> arima </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 김민규 </td>
   <td style="text-align:left;"> arima </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 조승연 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 남도현 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 송형준 </td>
   <td style="text-align:left;"> arima </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 이은상 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 금동현 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 차준호 </td>
   <td style="text-align:left;"> arima </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 손동표 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 황윤성 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 강민희 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 구정모 </td>
   <td style="text-align:left;"> ets </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 이한결 </td>
   <td style="text-align:left;"> arima </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 송유빈 </td>
   <td style="text-align:left;"> tslm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 함원진 </td>
   <td style="text-align:left;"> arima </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 토니 </td>
   <td style="text-align:left;"> arima </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 이세진 </td>
   <td style="text-align:left;"> arima </td>
  </tr>
</tbody>
</table>
<p> 연습생별 최적 모델을 찾는 함수에서 지정한 <code>use_model</code>변수는 개별 모델을 적용할 때 사용한 모델의 이름을 저장한 변수입니다. 이 변수만을 별도로 보니 연습생별로 모델을 적용하는데 있어서 대체로 arima 모델과 시계열 회귀모델이 선택되고 ets 모델은 상대적으로 덜 선택된 것을 볼 수 있습니다. 이처럼 언급량 데이터는 성격과 형태가 유사한 데이터 이지만 데이터가 지닌 시계열적 특징에 따라 적용된 모델이 상이한 것을 확인할 수 있었습니다.</p>
</div>
<div id="모델-시각화" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> 모델 시각화</h2>
<p> 개개인의 데이터에 맞춘 모델을 이전장에서 했던 유사한 시각화 방식으로 파악할 수 있습니다. 생성된 모델과 실제 데이터를 모델에 적합한 값 그리고 모델이 예측한 값을 연습생별로 시각화하여 살펴보도록 하겠습니다.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="시계열-분석2.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 모델 시각화 함수 생성  </span></span>
<span id="cb39-2"><a href="시계열-분석2.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyquant) </span>
<span id="cb39-3"><a href="시계열-분석2.html#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="시계열-분석2.html#cb39-4" aria-hidden="true" tabindex="-1"></a>boy_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(boy){</span>
<span id="cb39-5"><a href="시계열-분석2.html#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">forecast</span>(final[[boy]]<span class="sc">$</span>model, <span class="at">h =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="시계열-분석2.html#cb39-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">autoplot</span>() <span class="sc">+</span> </span>
<span id="cb39-7"><a href="시계열-분석2.html#cb39-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">autolayer</span>(<span class="fu">fitted</span>(final[[boy]]<span class="sc">$</span>model), <span class="at">series =</span> <span class="st">&#39;fitted&#39;</span>, <span class="at">color =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span> </span>
<span id="cb39-8"><a href="시계열-분석2.html#cb39-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">9</span>), </span>
<span id="cb39-9"><a href="시계열-분석2.html#cb39-9" aria-hidden="true" tabindex="-1"></a>                           <span class="at">labels =</span> <span class="fu">str_glue</span>(<span class="st">&quot;{(seq(1, 7) + 4) %&gt;% append(c(&#39;final&#39;, &#39;predict&#39;))}&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb39-10"><a href="시계열-분석2.html#cb39-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_tq</span>() <span class="sc">+</span> </span>
<span id="cb39-11"><a href="시계열-분석2.html#cb39-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">subtitle =</span> boy, <span class="at">x =</span> <span class="st">&#39;episode&#39;</span>, <span class="at">y =</span> <span class="st">&#39;sum_mention&#39;</span>) <span class="sc">+</span> </span>
<span id="cb39-12"><a href="시계열-분석2.html#cb39-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">12</span>)) </span>
<span id="cb39-13"><a href="시계열-분석2.html#cb39-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-14"><a href="시계열-분석2.html#cb39-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-15"><a href="시계열-분석2.html#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 연습생별 모델 그래프 저장 </span></span>
<span id="cb39-16"><a href="시계열-분석2.html#cb39-16" aria-hidden="true" tabindex="-1"></a>i <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb39-17"><a href="시계열-분석2.html#cb39-17" aria-hidden="true" tabindex="-1"></a>final_plot <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb39-18"><a href="시계열-분석2.html#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>)){</span>
<span id="cb39-19"><a href="시계열-분석2.html#cb39-19" aria-hidden="true" tabindex="-1"></a>    final_plot[[i]] <span class="ot">&lt;-</span> <span class="fu">boy_plot</span>(boylist[i])</span>
<span id="cb39-20"><a href="시계열-분석2.html#cb39-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="시계열-분석2.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb40-2"><a href="시계열-분석2.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">&#39;grid.arrange&#39;</span>, <span class="fu">c</span>(final_plot, <span class="at">ncol =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="bookdown_sample_files/figure-html/unnamed-chunk-21-1.png" width="672" /><img src="bookdown_sample_files/figure-html/unnamed-chunk-21-2.png" width="672" /><img src="bookdown_sample_files/figure-html/unnamed-chunk-21-3.png" width="672" /><img src="bookdown_sample_files/figure-html/unnamed-chunk-21-4.png" width="672" /><img src="bookdown_sample_files/figure-html/unnamed-chunk-21-5.png" width="672" /><img src="bookdown_sample_files/figure-html/unnamed-chunk-21-6.png" width="672" /><img src="bookdown_sample_files/figure-html/unnamed-chunk-21-7.png" width="672" /></p>
<p> 방송이 방영된 회차에 발생한 실제 언급량을 검정선에, 생성된 모델에 실제 언급량을 반영한 모델값을 붉은색선, 그리고 방송이 끝난 후의 언급량을 모델이 예측한 값을 푸른색 신뢰구간과 함께 파란색선으로 표현하였습니다. 연습생별로 모델이 추정한 미래 값이 서로 상이한 것을 볼 수 있습니다.</p>
</div>
<div id="결론" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> 결론</h2>
<p> 지금까지 적지 않은 과정을 통해 시계열 분석 절차를 진행 해 왔습니다. 모델에 사용된 데이터는 커뮤니티 게시판에서 시청자들 혹은 방송에 관심이 있는 유저들이 작성한 게시글의 제목으로, 이 제목 중 특정 연습생 인물의 이름 또는 별명을 일간별로 계산하여 이를 시계열 모델로 생성하였는데요. 이제 해당 개별 모델들이 추정한 방송이 끝난 이후의 미래값을 비교하여 연습생들의 (추정 언급량)순위를 매겨 보겠습니다.</p>
<p> 모델을 생성하였으면 미래값을 추정하는 것은 그리 어려운 일이 아닙니다. 지금까지 자주 사용하였던 <code>forecast()</code>함수를 사용하여 개개인의 미래값을 도출하고 이를 하나의 데이터프레임으로 묶겠습니다.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="시계열-분석2.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb41-2"><a href="시계열-분석2.html#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="시계열-분석2.html#cb41-3" aria-hidden="true" tabindex="-1"></a>compare_pred <span class="ot">&lt;-</span> final <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="시계열-분석2.html#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(<span class="cf">function</span>(x){</span>
<span id="cb41-5"><a href="시계열-분석2.html#cb41-5" aria-hidden="true" tabindex="-1"></a>        x<span class="sc">$</span>model <span class="sc">%&gt;%</span> </span>
<span id="cb41-6"><a href="시계열-분석2.html#cb41-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-7"><a href="시계열-분석2.html#cb41-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-8"><a href="시계열-분석2.html#cb41-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">map_df</span>(mean)</span>
<span id="cb41-9"><a href="시계열-분석2.html#cb41-9" aria-hidden="true" tabindex="-1"></a>    }) <span class="sc">%&gt;%</span> </span>
<span id="cb41-10"><a href="시계열-분석2.html#cb41-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">do.call</span>(rbind, .)</span>
<span id="cb41-11"><a href="시계열-분석2.html#cb41-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-12"><a href="시계열-분석2.html#cb41-12" aria-hidden="true" tabindex="-1"></a>compare_pred</span></code></pre></div>
<pre><code>## # A tibble: 20 x 5
##    `Point Forecast` `Lo 80` `Hi 80` `Lo 95` `Hi 95`
##  *            &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1            1053.   670.    1436.  459.     1647.
##  2            2003.   725.    3280.   22.1    3983.
##  3             543.  -188.    1274. -575.     1660.
##  4            1066.   631.    1501.  401.     1731.
##  5            1056.   365.    1747.   -1.45   2113.
##  6            2184.  1502.    2865. 1127.     3240.
##  7            1031.   677.    1386.  481.     1582.
##  8             734.   269.    1199.   22.6    1445.
##  9            1153.   793.    1513.  594.     1711.
## 10             940.   512.    1368.  276.     1604.
## 11             611.   439.     782.  348.      873.
## 12             527.   291.     763.  162.      893.
## 13             891.   520.    1262.  315.     1467.
## 14             978.   504.    1451.  243.     1712.
## 15            1424.   654.    2194.  247.     2602.
## 16             542.   273.     811.  130.      953.
## 17             620.   236.    1004.   24.3    1216.
## 18             354.   144.     564.   32.8     676.
## 19             567.   239.     895.   64.9    1069.
## 20             278.    88.9    467.  -11.0     566.</code></pre>
<p> 예측은 모델이 바로 1 시점 이후를 예측하는 것이 아닌 시계열 데이터가 지니고 있는 주기적인 반복성인 계절성의 영향을 고려하여 모델의 7 예측 시점 까지를 구하고 이를 평균낸 값을 활용하도록 하겠습니다. 각 모델별로 7 시점 미래 값을 평균내어 예측 신뢰구간과 함께 점추정값을 하나의 객체에 저장하였습니다. 여기서 비교의 대상이 될 점추정값(Point Forecast)값을 기준으로 연습생들을 재정렬, 이를 순위매겨보도록 하겠습니다.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="시계열-분석2.html#cb43-1" aria-hidden="true" tabindex="-1"></a>model_rank <span class="ot">&lt;-</span> compare_pred <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="시계열-분석2.html#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">Point Forecast</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="시계열-분석2.html#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>(), </span>
<span id="cb43-4"><a href="시계열-분석2.html#cb43-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">boy  =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="시계열-분석2.html#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(rank, boy, <span class="st">`</span><span class="at">Point Forecast</span><span class="st">`</span>)</span>
<span id="cb43-6"><a href="시계열-분석2.html#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="시계열-분석2.html#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb43-8"><a href="시계열-분석2.html#cb43-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-9"><a href="시계열-분석2.html#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(model_rank, <span class="at">align =</span> <span class="st">&#39;c&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-10"><a href="시계열-분석2.html#cb43-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="st">&quot;striped&quot;</span>, <span class="at">full_width =</span> T, <span class="at">position =</span> <span class="st">&quot;center&quot;</span>)</span></code></pre></div>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
rank
</th>
<th style="text-align:center;">
boy
</th>
<th style="text-align:center;">
Point Forecast
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
조승연
</td>
<td style="text-align:center;">
2183.7551
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
김우석
</td>
<td style="text-align:center;">
2002.5306
</td>
</tr>
<tr>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
구정모
</td>
<td style="text-align:center;">
1424.3354
</td>
</tr>
<tr>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
이은상
</td>
<td style="text-align:center;">
1152.6122
</td>
</tr>
<tr>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
한승우
</td>
<td style="text-align:center;">
1065.6902
</td>
</tr>
<tr>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
김민규
</td>
<td style="text-align:center;">
1055.8778
</td>
</tr>
<tr>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
김요한
</td>
<td style="text-align:center;">
1053.1224
</td>
</tr>
<tr>
<td style="text-align:center;">
8
</td>
<td style="text-align:center;">
남도현
</td>
<td style="text-align:center;">
1031.4286
</td>
</tr>
<tr>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
강민희
</td>
<td style="text-align:center;">
977.6735
</td>
</tr>
<tr>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
금동현
</td>
<td style="text-align:center;">
940.2449
</td>
</tr>
<tr>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
황윤성
</td>
<td style="text-align:center;">
890.9592
</td>
</tr>
<tr>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
송형준
</td>
<td style="text-align:center;">
733.9222
</td>
</tr>
<tr>
<td style="text-align:center;">
13
</td>
<td style="text-align:center;">
송유빈
</td>
<td style="text-align:center;">
619.9592
</td>
</tr>
<tr>
<td style="text-align:center;">
14
</td>
<td style="text-align:center;">
차준호
</td>
<td style="text-align:center;">
610.5810
</td>
</tr>
<tr>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
토니
</td>
<td style="text-align:center;">
567.1067
</td>
</tr>
<tr>
<td style="text-align:center;">
16
</td>
<td style="text-align:center;">
이진혁
</td>
<td style="text-align:center;">
542.9184
</td>
</tr>
<tr>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
이한결
</td>
<td style="text-align:center;">
541.5512
</td>
</tr>
<tr>
<td style="text-align:center;">
18
</td>
<td style="text-align:center;">
손동표
</td>
<td style="text-align:center;">
527.0816
</td>
</tr>
<tr>
<td style="text-align:center;">
19
</td>
<td style="text-align:center;">
함원진
</td>
<td style="text-align:center;">
354.2201
</td>
</tr>
<tr>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
이세진
</td>
<td style="text-align:center;">
277.7153
</td>
</tr>
</tbody>
</table>
<p> 모델이 추정한 미래값을 기준으로 최종 11명을 뽑자면 <strong>조승연</strong>, <strong>김우석</strong>, <strong>구정모</strong>, <strong>이은상</strong>, <strong>한승우</strong>, <strong>김민규</strong>, <strong>김요한</strong>, <strong>남도현</strong>, <strong>강민희</strong>, <strong>금동현</strong>, <strong>황윤성</strong> 순으로 뽑을 수 있겠습니다.</p>
<p> 이전 5장에서 순위를 매겼던 방식인 방송 기간 중 연습생별 총 언급량 기준, 그리고 방송의 마지막 주차(11주차)를 기준으로 정렬한 언급량 순위랑 비교해보면 어떠한 차이가 있을지 비교해 보도록 하겠습니다.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="시계열-분석2.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb44-2"><a href="시계열-분석2.html#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="시계열-분석2.html#cb44-3" aria-hidden="true" tabindex="-1"></a>temp_mention <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb44-4"><a href="시계열-분석2.html#cb44-4" aria-hidden="true" tabindex="-1"></a>episode_mention <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb44-5"><a href="시계열-분석2.html#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>)){</span>
<span id="cb44-6"><a href="시계열-분석2.html#cb44-6" aria-hidden="true" tabindex="-1"></a>    temp_mention <span class="ot">&lt;-</span> pxdata <span class="sc">%&gt;%</span></span>
<span id="cb44-7"><a href="시계열-분석2.html#cb44-7" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">str_detect</span>(p_title, boylist2[i])) <span class="sc">%&gt;%</span></span>
<span id="cb44-8"><a href="시계열-분석2.html#cb44-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(p_episode) <span class="sc">%&gt;%</span></span>
<span id="cb44-9"><a href="시계열-분석2.html#cb44-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">mention =</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb44-10"><a href="시계열-분석2.html#cb44-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">boy =</span> boylist[i])</span>
<span id="cb44-11"><a href="시계열-분석2.html#cb44-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-12"><a href="시계열-분석2.html#cb44-12" aria-hidden="true" tabindex="-1"></a>    episode_mention <span class="ot">&lt;-</span> <span class="fu">rbind</span>(episode_mention, temp_mention)</span>
<span id="cb44-13"><a href="시계열-분석2.html#cb44-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-14"><a href="시계열-분석2.html#cb44-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-15"><a href="시계열-분석2.html#cb44-15" aria-hidden="true" tabindex="-1"></a>week11_rank <span class="ot">&lt;-</span> episode_mention <span class="sc">%&gt;%</span> </span>
<span id="cb44-16"><a href="시계열-분석2.html#cb44-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(p_episode <span class="sc">==</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-17"><a href="시계열-분석2.html#cb44-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(mention)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-18"><a href="시계열-분석2.html#cb44-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">week11_rank =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb44-19"><a href="시계열-분석2.html#cb44-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">week11_mention =</span> mention) <span class="sc">%&gt;%</span> </span>
<span id="cb44-20"><a href="시계열-분석2.html#cb44-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(week11_rank, boy, week11_mention)</span>
<span id="cb44-21"><a href="시계열-분석2.html#cb44-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-22"><a href="시계열-분석2.html#cb44-22" aria-hidden="true" tabindex="-1"></a>total_rank <span class="ot">&lt;-</span> episode_mention <span class="sc">%&gt;%</span> </span>
<span id="cb44-23"><a href="시계열-분석2.html#cb44-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(boy) <span class="sc">%&gt;%</span> </span>
<span id="cb44-24"><a href="시계열-분석2.html#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">total_mention =</span> <span class="fu">sum</span>(mention)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-25"><a href="시계열-분석2.html#cb44-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(total_mention)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-26"><a href="시계열-분석2.html#cb44-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">total_rank =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb44-27"><a href="시계열-분석2.html#cb44-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(total_rank, boy, total_mention)</span>
<span id="cb44-28"><a href="시계열-분석2.html#cb44-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-29"><a href="시계열-분석2.html#cb44-29" aria-hidden="true" tabindex="-1"></a>all_rank <span class="ot">&lt;-</span> model_rank <span class="sc">%&gt;%</span> </span>
<span id="cb44-30"><a href="시계열-분석2.html#cb44-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">model_rank =</span> rank) <span class="sc">%&gt;%</span> </span>
<span id="cb44-31"><a href="시계열-분석2.html#cb44-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(week11_rank, <span class="at">by =</span> <span class="st">&#39;boy&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-32"><a href="시계열-분석2.html#cb44-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(total_rank , <span class="at">by =</span> <span class="st">&#39;boy&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-33"><a href="시계열-분석2.html#cb44-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(model_rank, week11_rank, total_rank, boy, <span class="st">`</span><span class="at">Point Forecast</span><span class="st">`</span>, week11_mention, total_mention)</span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="시계열-분석2.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb45-2"><a href="시계열-분석2.html#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="시계열-분석2.html#cb45-3" aria-hidden="true" tabindex="-1"></a>my_table <span class="ot">&lt;-</span> <span class="cf">function</span>(dt){</span>
<span id="cb45-4"><a href="시계열-분석2.html#cb45-4" aria-hidden="true" tabindex="-1"></a>    dt <span class="sc">%&gt;%</span> <span class="fu">datatable</span>(<span class="at">rownames =</span> F, </span>
<span id="cb45-5"><a href="시계열-분석2.html#cb45-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">options =</span> <span class="fu">list</span>(<span class="at">dom =</span> <span class="st">&#39;t&#39;</span>, </span>
<span id="cb45-6"><a href="시계열-분석2.html#cb45-6" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">pageLength =</span> <span class="dv">20</span>, </span>
<span id="cb45-7"><a href="시계열-분석2.html#cb45-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">&#39;dt-center&#39;</span>, <span class="at">targets =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">6</span>)),</span>
<span id="cb45-8"><a href="시계열-분석2.html#cb45-8" aria-hidden="true" tabindex="-1"></a>                                    <span class="co"># column name 사이즈 조절 </span></span>
<span id="cb45-9"><a href="시계열-분석2.html#cb45-9" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">headerCallback =</span> DT<span class="sc">::</span><span class="fu">JS</span>(</span>
<span id="cb45-10"><a href="시계열-분석2.html#cb45-10" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;function(thead) {&quot;</span>,</span>
<span id="cb45-11"><a href="시계열-분석2.html#cb45-11" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;  $(thead).css(&#39;font-size&#39;, &#39;0.8em&#39;);&quot;</span>,</span>
<span id="cb45-12"><a href="시계열-분석2.html#cb45-12" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;}&quot;</span></span>
<span id="cb45-13"><a href="시계열-분석2.html#cb45-13" aria-hidden="true" tabindex="-1"></a>                                    ) </span>
<span id="cb45-14"><a href="시계열-분석2.html#cb45-14" aria-hidden="true" tabindex="-1"></a>                     )</span>
<span id="cb45-15"><a href="시계열-분석2.html#cb45-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb45-16"><a href="시계열-분석2.html#cb45-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">formatRound</span>(<span class="st">&quot;Point Forecast&quot;</span>, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-17"><a href="시계열-분석2.html#cb45-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">formatStyle</span>(<span class="at">columns =</span> <span class="fu">colnames</span>(.), <span class="at">fontSize =</span> <span class="st">&#39;70%&#39;</span>) </span>
<span id="cb45-18"><a href="시계열-분석2.html#cb45-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-19"><a href="시계열-분석2.html#cb45-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-20"><a href="시계열-분석2.html#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="fu">my_table</span>(all_rank)</span></code></pre></div>
<div id="htmlwidget-7c966d954201fe2b0194" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7c966d954201fe2b0194">{"x":{"filter":"none","data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],[1,3,2,8,5,4,6,7,12,10,13,11,14,16,15,9,17,18,19,20],[2,1,5,4,9,3,6,7,10,13,12,8,15,16,17,11,18,14,19,20],["조승연","김우석","구정모","이은상","한승우","김민규","김요한","남도현","강민희","금동현","황윤성","송형준","송유빈","차준호","토니","이진혁","이한결","손동표","함원진","이세진"],[2183.75510204082,2002.5306122449,1424.3353693699,1152.61224489796,1065.69022242028,1055.87781602846,1053.12244897959,1031.42857142857,977.673469387755,940.244897959184,890.959183673469,733.922186849255,619.959183673469,610.581016965812,567.106657845701,542.918367346939,541.55124079137,527.081632653061,354.220117002369,277.715346117471],[13637,9731,10387,6608,6779,8262,6726,6689,5698,5997,5139,5864,4537,4332,4336,6549,4200,3853,3235,1721],[58019,71188,40142,40305,28371,46739,38578,34959,27723,23070,23139,32814,19797,19545,16484,26603,16401,21585,13852,9262]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>model_rank<\/th>\n      <th>week11_rank<\/th>\n      <th>total_rank<\/th>\n      <th>boy<\/th>\n      <th>Point Forecast<\/th>\n      <th>week11_mention<\/th>\n      <th>total_mention<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","pageLength":20,"columnDefs":[{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\");\n  }"},{"className":"dt-center","targets":[0,1,2,3,4,5,6]}],"headerCallback":"function(thead) {\n  $(thead).css('font-size', '0.8em');\n}","order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100],"rowCallback":"function(row, data) {\n}"}},"evals":["options.columnDefs.0.render","options.headerCallback","options.rowCallback"],"jsHooks":[]}</script>
<p> 기준별로 순위는 상이하지만 상위권과 하위권이 대체로 유사하게 나타나는 것처럼 보입니다. 그렇다면 모델이 추정한 값의 순위, 11주차 기준 순위, 전체 언급량 순위 모두에서 데뷔 순위로 나타나는 연습생과 그렇지 않은 연습생은 어떠한지 보겠습니다.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="시계열-분석2.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 모든 기준에 들어가는 연습생 </span></span>
<span id="cb46-2"><a href="시계열-분석2.html#cb46-2" aria-hidden="true" tabindex="-1"></a>all_rank <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="시계열-분석2.html#cb46-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(model_rank  <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">11</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="시계열-분석2.html#cb46-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(week11_rank <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">11</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-5"><a href="시계열-분석2.html#cb46-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(total_rank  <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">11</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="시계열-분석2.html#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">my_table</span>()</span></code></pre></div>
<div id="htmlwidget-b9107eebab4cc5c7e387" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-b9107eebab4cc5c7e387">{"x":{"filter":"none","data":[[1,2,3,4,5,6,7,8],[1,3,2,8,5,4,6,7],[2,1,5,4,9,3,6,7],["조승연","김우석","구정모","이은상","한승우","김민규","김요한","남도현"],[2183.75510204082,2002.5306122449,1424.3353693699,1152.61224489796,1065.69022242028,1055.87781602846,1053.12244897959,1031.42857142857],[13637,9731,10387,6608,6779,8262,6726,6689],[58019,71188,40142,40305,28371,46739,38578,34959]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>model_rank<\/th>\n      <th>week11_rank<\/th>\n      <th>total_rank<\/th>\n      <th>boy<\/th>\n      <th>Point Forecast<\/th>\n      <th>week11_mention<\/th>\n      <th>total_mention<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","pageLength":20,"columnDefs":[{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\");\n  }"},{"className":"dt-center","targets":[0,1,2,3,4,5,6]}],"headerCallback":"function(thead) {\n  $(thead).css('font-size', '0.8em');\n}","order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100],"rowCallback":"function(row, data) {\n}"}},"evals":["options.columnDefs.0.render","options.headerCallback","options.rowCallback"],"jsHooks":[]}</script>
<p> 모든 기준에서 최종 데뷔조로 나타나는 연습생은 각각 <strong>조승연</strong>, <strong>김우석</strong>, <strong>구정모</strong>, <strong>이은상</strong>, <strong>한승우</strong>, <strong>김민규</strong>, <strong>김요한</strong>, <strong>남도현</strong>이 좋은 수치를 내는 것을 볼 수 있습니다.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="시계열-분석2.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 모든 기준에 들어가지 않는 연습생 </span></span>
<span id="cb47-2"><a href="시계열-분석2.html#cb47-2" aria-hidden="true" tabindex="-1"></a>all_rank <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="시계열-분석2.html#cb47-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>model_rank  <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">11</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb47-4"><a href="시계열-분석2.html#cb47-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>week11_rank <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">11</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb47-5"><a href="시계열-분석2.html#cb47-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>total_rank  <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">11</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb47-6"><a href="시계열-분석2.html#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">my_table</span>()</span></code></pre></div>
<div id="htmlwidget-800440b1f55e5642a033" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-800440b1f55e5642a033">{"x":{"filter":"none","data":[[13,14,15,17,18,19,20],[14,16,15,17,18,19,20],[15,16,17,18,14,19,20],["송유빈","차준호","토니","이한결","손동표","함원진","이세진"],[619.959183673469,610.581016965812,567.106657845701,541.55124079137,527.081632653061,354.220117002369,277.715346117471],[4537,4332,4336,4200,3853,3235,1721],[19797,19545,16484,16401,21585,13852,9262]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>model_rank<\/th>\n      <th>week11_rank<\/th>\n      <th>total_rank<\/th>\n      <th>boy<\/th>\n      <th>Point Forecast<\/th>\n      <th>week11_mention<\/th>\n      <th>total_mention<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","pageLength":20,"columnDefs":[{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\");\n  }"},{"className":"dt-center","targets":[0,1,2,3,4,5,6]}],"headerCallback":"function(thead) {\n  $(thead).css('font-size', '0.8em');\n}","order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100],"rowCallback":"function(row, data) {\n}"}},"evals":["options.columnDefs.0.render","options.headerCallback","options.rowCallback"],"jsHooks":[]}</script>
<p> 한편 <strong>송유빈</strong>, <strong>차준호</strong>, <strong>토니</strong>, <strong>이한결</strong>, <strong>손동표</strong>, <strong>함원진</strong>, <strong>이세진</strong> 연습생들은 모든 기준에서도 데뷔조에 들어가지 않는것으로 나오고 있습니다. 하지만 해당 결과를 실제 예측에 반영하기는 무리가 있는점이 있습니다. <em>신뢰구간</em>을 고려하지 않은 점추정 값의 비교는 자칫 치명적인 오류를 범할 수 있기 때문입니다. 예를들어 어느 두 사람의 추정값이 상대적으로 높게 나오더라도 신뢰구간이 겹치게 된다면 이는 실제 두사람의 결과가 얼마든지 바뀔 수 있기 때문입니다.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="시계열-분석2.html#cb48-1" aria-hidden="true" tabindex="-1"></a>final[[<span class="st">&#39;송형준&#39;</span>]]<span class="sc">$</span>model <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="시계열-분석2.html#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="시계열-분석2.html#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">autoplot</span>(<span class="at">conf.int.fill =</span> <span class="st">&#39;royalblue1&#39;</span>, <span class="at">conf.int.alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb48-4"><a href="시계열-분석2.html#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">autolayer</span>(final[[<span class="st">&#39;황윤성&#39;</span>]]<span class="sc">$</span>model<span class="sc">$</span>data<span class="sc">$</span>sum_mention,    <span class="at">color =</span> <span class="st">&#39;violetred4&#39;</span>)  <span class="sc">+</span> </span>
<span id="cb48-5"><a href="시계열-분석2.html#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">autolayer</span>(final[[<span class="st">&#39;황윤성&#39;</span>]]<span class="sc">$</span>model <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">7</span>), <span class="at">color =</span> <span class="st">&#39;red&#39;</span>,  <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb48-6"><a href="시계열-분석2.html#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;황윤성 - 송형준 95% 신뢰구간 비교&quot;</span>)</span></code></pre></div>
<p><img src="bookdown_sample_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p> 그래프에 붉은색으로 음영처리된 부분은 모델이 데뷔조의 마지막 등수인 11등으로 예측한 <strong>황윤성</strong>의 95% 신뢰구간을 표시한 것이고, 푸른색 음영처리 부분은 12등으로 예측한 <strong>송형준</strong>의 신뢰구간을 의미합니다. 신뢰구간인 즉슨 추정된 구간이 모집단 평균값을 포함하고 있을 확률이 95%란 의미인데 이처럼 겹쳐있는 부분이 존재하면 특히 겹쳐있는 부분의 범위가 넓을수록 쉽사리 누가 우위에 있는지를 속단하기 어려운 의미입니다.</p>
<p> 또한 데이터의 출처를 생각해 보자면 특정 커뮤니티에서의 의견이기 때문이기 때문에 커뮤니티에 활동하는 유저의 <em>성향</em>에 따라 데이터가 편향이 될 가능성이 높습니다. 수집한 데이터의 출처가된 커뮤니티의 유저들이 전체 시청자들의 특성과 일치하긴 어렵기 때문에 해당 모델링 결과를 통해 최종 예측을 하기엔 다소 무리가 있습니다.</p>
<p> 그렇다면 진행한 모델링의 결과는 의미가 없냐? 또 그렇진 않습니다. 분석의 대전제가 된 언급량이 많을수록 인기가 있을것이다란 것에 맞춘 모델링이기에 여기서의 값이 높게 나온 연습생은 실제로 인기가 높은 연습생일 확률이 높습니다. 또한 높은 확률로 데뷔조에 속할 가능성이 있습니다.</p>
<p> 실제로 모델의 예측치 순위에서 3위에 있는 <strong>구정모</strong> 연습생과 10위의 <strong>금동현</strong> 연습생은 제작진의 (조작된) 방송의 최종 순위에서는 탈락한 것으로 발표 되었지만 (재판 과정에서 드러난) 실제 순위에선 각각 6위, 8위를 기록하여 최종 데뷔조 였단 것이 밝혀졌었습니다. 모델의 결과를 전적으로 신뢰하긴 어렵지만 어떤 연습생이 인기가 있었는지 참고하기엔 좋은 자료인 것 같습니다.</p>
<hr />
<p><br>
 지금까지 데이터 수집부터 모델 예측까지 다양한 절차를 통해 분석을 진행하였습니다. 최종 투표에서 조작이 있었다는 의혹으로 인해 지난해 말 프로듀스 X 101은 의혹에 대한 재판이 진행되었었고, 재판의 결과로 실제로 제작진의 투표조작이 있었다는 발표가 있었습니다. 처음 이 분석을 기획한 당시에 시청자들의 의견이 담긴 텍스트를 분석하면 최종적으로 선발될 연습생이 누군지 알 수 있지 않을까란 생각과, 이를 실제 결과와 대조하면 유의미한 결과가 있지 않을까 싶어 진행하였지만 실상은 모든것이 제작진의 조작이였다는 발표를 듣게 되니 약간은 허탈하면서도 평소 프로그램을 즐겨보던 한명의 시청자로서 아쉬운 발표이기도 했었습니다. 재판 이후에 나온 관련 기사들을 읽다보니 지금껏 너무 순진하게 방송국놈들을 믿었던건 아닌지 싶은 생각이 들기도 하더군요 ^^; 재판으로 밝혀진 사실이 궁금하신 분들은 <a href="https://legalengine.co.kr/cases/50035495">판결문 전문</a> 또는 잘 정리된 <a href="http://www.newdaily.co.kr/site/data/html/2021/01/22/2021012200179.html#livereGuideBtn">기사</a>에서 확인 하실 수 있습니다. 이것으로 프로듀스 X 101 데뷔 예측 분석을 마치도록 하겠습니다.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="시계열-분석1.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown_sample.pdf", "bookdown_sample.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
